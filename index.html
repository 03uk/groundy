<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Groundy by telly</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Groundy</h1>
        <p>Sexy way to execute async/background tasks on Android</p>

        <p class="view"><a href="https://github.com/telly/groundy">View the Project on GitHub <small>telly/groundy</small></a></p>


        <ul>
          <li><a href="https://github.com/telly/groundy/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/telly/groundy/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/telly/groundy">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="groundy-library-for-android" class="anchor" href="#groundy-library-for-android"><span class="octicon octicon-link"></span></a>Groundy library for Android</h1>

<p>Groundy is a fun, sexy way to do background work on your Android app; it's specially useful for
running tasks that must be executed even if your activities are rotated or even quited. It allows
you to receive notifications from the background task directly to your activity or any object.</p>

<p>It is useful for several scenarios like executing calls to external services (e.g. RESTful web
services), download and/or process files, encoding audio/video and any kind of task that could
block the main thread.</p>

<h1>
<a name="basic-usage" class="anchor" href="#basic-usage"><span class="octicon octicon-link"></span></a>Basic usage</h1>

<p>Create a subclass of <code>GroundyTask</code>:</p>

<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExampleTask</span> <span class="kd">extends</span> <span class="n">GroundyTask</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">protected</span> <span class="n">TaskResult</span> <span class="nf">doInBackground</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// you can send parameters to the task using a Bundle (optional)</span>
    <span class="n">String</span> <span class="n">exampleParam</span> <span class="o">=</span> <span class="n">getStringArg</span><span class="o">(</span><span class="s">"arg_name"</span><span class="o">);</span>

    <span class="c1">// lots of code</span>

    <span class="c1">// return a TaskResult depending on the success of your task</span>
    <span class="c1">// and optionally pass some results back</span>
    <span class="k">return</span> <span class="nf">succeeded</span><span class="o">().</span><span class="na">add</span><span class="o">(</span><span class="s">"the_result"</span><span class="o">,</span> <span class="s">"some result"</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>Whenever you want to execute the task, just do this:</p>

<div class="highlight"><pre><span class="c1">// this is usually performed from within an Activity</span>
<span class="n">Groundy</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">ExampleTask</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="o">.</span><span class="na">callback</span><span class="o">(</span><span class="n">callbackObj</span><span class="o">)</span>        <span class="c1">// required if you want to get notified of your task lifecycle</span>
    <span class="o">.</span><span class="na">arg</span><span class="o">(</span><span class="s">"arg_name"</span><span class="o">,</span> <span class="s">"foo"</span><span class="o">)</span>       <span class="c1">// optional</span>
    <span class="o">.</span><span class="na">queueUsing</span><span class="o">(</span><span class="n">YourActivity</span><span class="o">.</span><span class="na">this</span><span class="o">);</span>
</pre></div>

<p>You will get results in your callback object(s) (in the main thread):</p>

<div class="highlight"><pre><span class="nd">@OnSuccess</span><span class="o">(</span><span class="n">ExampleTask</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onSuccess</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">"the_result"</span><span class="o">)</span> <span class="n">String</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// do something with the result</span>
<span class="o">}</span>
</pre></div>

<p>Do not forget to add <code>GroundyService</code> to the <code>AndroidManifest.xml</code> file:</p>

<div class="highlight"><pre><span class="nt">&lt;service</span> <span class="na">android:name=</span><span class="s">"com.telly.groundy.GroundyService"</span><span class="nt">/&gt;</span>
</pre></div>

<h1>
<a name="extending-callback-system" class="anchor" href="#extending-callback-system"><span class="octicon octicon-link"></span></a>Extending callback system</h1>

<p>There are some already defined onCallback annotations: <code>@OnSuccess</code>, <code>@OnFailed</code>, <code>@OnCancel</code>,
<code>@OnProgress</code> and <code>@OnStart</code>, but you can also create your own callback types like:</p>

<div class="highlight"><pre><span class="nd">@OnCallback</span><span class="o">(</span><span class="n">task</span> <span class="o">=</span> <span class="n">ChuckTask</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">name</span> <span class="o">=</span> <span class="s">"kick"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onChuckNorrisAttack</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">"target"</span><span class="o">)</span> <span class="n">String</span> <span class="n">target</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="s">"Chuck Norris kicked your "</span> <span class="o">+</span> <span class="n">target</span><span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>

<p>Take a look at the custom callbacks example for details on this.</p>

<h1>
<a name="maven-integration" class="anchor" href="#maven-integration"><span class="octicon octicon-link"></span></a>Maven integration</h1>

<p>In order to use this library from you Android project using maven your pom should look like this:</p>

<div class="highlight"><pre><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.telly<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>groundy<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

<span class="c">&lt;!-- enables groundy JSR-269 processor which makes everything up to 5 times faster --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.telly<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>groundy-compiler<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/telly">telly</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>